'use strict';



'use strict';

//mete en la variable todos las clases que existen collapsible__container
var collapsibleContainer = document.querySelectorAll('.collapsible__container');
//mete en la variable todos las clases que existen collapsible__label
var collapsibleLabel = document.querySelectorAll('.collapsible__label');


function updateCollapsibles(e) {

  //se le pasa el evento del click en el collapsible que se haya clicado
  // y mete en la variable el padre de ese collapsible
  var padreCollapsibleLabel = e.currentTarget.parentElement;


  //si el padre del collapsible que se ha clicado tiene la clase
  //collapsible--visible la borra y sino la añade, esta clase hace que
  //el display pase de none a block
  if (padreCollapsibleLabel.classList.contains('collapsible--visible')) {
    padreCollapsibleLabel.classList.remove('collapsible--visible');
  } else {
    //si no  está la clase collapsible--visible entonces llama a la funcion
    //y despues añade la clase
    closeAllCollapsibles();
    padreCollapsibleLabel.classList.add('collapsible--visible');
  }

  var dataCol = padreCollapsibleLabel.getAttribute('data-valor');
  var dataIcon = document.querySelectorAll('.icon-collapsible');

  for(i = 0; i < dataIcon.length; i++){
    if (dataIcon[i].getAttribute('data-valor') == dataCol){
      if (dataIcon[i].classList.contains('fa-chevron-down')){
        console.log("arriba");
         dataIcon[i].classList.remove('fa-chevron-down');
          dataIcon[i].classList.add('fa-chevron-up');
         
      } else if (dataIcon[i].classList.contains('fa-chevron-up')) {
        console.log("abajo");
        dataIcon[i].classList.remove('fa-chevron-up');
        dataIcon[i].classList.add('fa-chevron-down');
        
      }
    }
  }

  console.log("data", dataCol);


}

//funcion que va elimininando la clase collapsible--visible 
function closeAllCollapsibles() {
  for (var i = 0; i < collapsibleContainer.length; i++) {
    collapsibleContainer[i].classList.remove('collapsible--visible');
  }
}


//recorre el array de clases de collapsible__label y cada vez que
// se clica en un collapsible llama a la funcion updateCollapsibles
for (var i = 0; i < collapsibleContainer.length; i++) {

  collapsibleLabel[i].addEventListener('click', updateCollapsibles);
}


'use strict';

//SECCION DISEÑA COLORES//

var radioColors = document.querySelectorAll('.radio-colors');
var sectionCard = document.querySelector('.section--top__card');

function seleccionColor(e) {

  var id = e.target;
  console.log(id.value)
  var paleta1 = 'paleta-primary';
  var paleta2 = 'paleta-secondary';
  var paleta3 = 'paleta-tertiary';
  var paleta4 = 'paleta-hearts';
  console.log(id.id);
  if (id.id === paleta1) {
    eliminarColor();
    sectionCard.classList.toggle('primary-palette');
  }
  if (id.id === paleta2) {
    eliminarColor();
    sectionCard.classList.toggle('secondary-palette');
  }
  if (id.id === paleta3) {
    eliminarColor();
    sectionCard.classList.toggle('tertiary-palette');
  }
  if (id.id === paleta4) {
    eliminarColor();
    sectionCard.classList.toggle('hearts-palette');
  }
}

function eliminarColor() {
  sectionCard.classList.remove('primary-palette');
  sectionCard.classList.remove('secondary-palette');
  sectionCard.classList.remove('tertiary-palette');
  sectionCard.classList.remove('hearts-palette');
}

for (var i = 0; i < radioColors.length; i++) {
  radioColors[i].addEventListener('click', seleccionColor);
}

//SECCION DISEÑA FUENTES//

var radioFonts = document.querySelectorAll('.radio-fonts');
var titulo = document.querySelector('.card__title');
var subtitulo = document.querySelector('.card__subtitle');
var skills = document.querySelectorAll('.icon__text');



function seleccionFuente(e) {
  var id = e.target;
  var font1 = 'style-fonts1';
  var font2 = 'style-fonts2';
  var font3 = 'style-fonts3';
  var font4 = 'style-fonts4';
  console.log(id.id);
  if (id.id === font1) {
    
    var fonClass1 = 'font__style-font1';
    eliminaFuente(fonClass1);
    titulo.classList.add('font__style-font1');
    subtitulo.classList.add('font__style-font1');
    for(var i = 0 ; i < skills.length; i++){
      console.log(skills[i]);
      skills[i].classList.add('font__style-font1');
    }

  }
  if (id.id === font2) {
    
    var fonClass2 = 'font__style-font2';
    eliminaFuente(fonClass2);
    titulo.classList.add('font__style-font2');
    subtitulo.classList.add('font__style-font2');
    for (var i = 0; i < skills.length; i++) {
      skills[i].classList.add('font__style-font2');
    }

  }
  if (id.id === font3) {
  
      var fonClass3 = 'font__style-font3';
      eliminaFuente(fonClass3);
    titulo.classList.add('font__style-font3');
    subtitulo.classList.add('font__style-font3');
    for (var i = 0; i < skills.length; i++) {
      skills[i].classList.add('font__style-font3');
    }

  }
  if (id.id === font4) {
   
    var fonClass4 = 'font__style-font4';
    eliminaFuente(fonClass4);
    titulo.classList.add('font__style-font4');
    subtitulo.classList.add('font__style-font4');
    for (var i = 0; i < skills.length; i++) {
      skills[i].classList.add('font__style-font4');
    }

  }
}

function eliminaFuente(font) {

console.log("eliminar ", font);

  titulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  subtitulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  titulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  subtitulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  titulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  subtitulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  titulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
  subtitulo.classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
   for (var i = 0; i < skills.length; i++) {
     skills[i].classList.remove('font__style-font1', 'font__style-font2', 'font__style-font3', 'font__style-font4');
   }

}


for (var i = 0; i < radioFonts.length; i++) {
  radioFonts[i].addEventListener('click', seleccionFuente);
}

'use strict';
var localValue = {
  palette:'',
  typography:'',
  name:'',
  job:'',
  phone:'',
  email:'',
  linkedin:'',
  github:'',
  photo:'',
  skills:[]
};
var datos = document.querySelectorAll ('.input--stuffed');
var btnCreaTarjeta = document.querySelector('.form2__button');
function saveLocalStorage(id, value){
  console.log('id y value', id, value);
  var updateLocalValue = [];
  console.log(updateLocalValue);
  localValue[id] = value;
  console.log(localValue);
  updateLocalValue[0] = localValue;
  console.log(updateLocalValue);
  localStorage.setItem('localValue', JSON.stringify(updateLocalValue));
  var form = document.querySelector(".form");
  console.log(updateLocalValue);
}
var form = document.querySelector('.form');

function crearLocalStorage () {
  var json = JSON.parse(localStorage.getItem('localValue'));
  var updateLocalValue= json;
  console.log("get localstorage", updateLocalValue);
  console.log(updateLocalValue[0].name);
  var name = document.querySelector('#complete--name');
  var job = document.querySelector('#job');
  var email = document.querySelector('#email');
  var tlf = document.querySelector('#tlf');
  var lkd = document.querySelector('#lkd');
  var lkd = document.querySelector('#lkd');
  var git = document.querySelector('#gith');

  name.value = updateLocalValue[0].name;
  job.value = updateLocalValue[0].job;
  email.value = updateLocalValue[0].email;
  tlf.value = updateLocalValue[0].phone;
  lkd.value = updateLocalValue[0].linkedin;
  git.value = updateLocalValue[0].github;


}

crearLocalStorage();




// var json = JSON.parse(localStorage.getItem('localValue'));
// loadLocalStorage(json);
// var buttonReset = document.querySelector('.button');
// function reset(event) {
//   localStorage.setItem('localValue', JSON.stringify(localValue));
//   loadLocalStorage(localValue);
// }
// buttonReset.addEventListener('click',reset);
'use strict';

var inputDataText = document.querySelectorAll('.input--text');
//INPUTS HREF
var inputDataHref = document.querySelectorAll('.input--href');

function updateCard(event) {
  var inputElement = event.currentTarget;
  var targetID = inputElement.getAttribute('data-elementos');
  var nameLocal = event.currentTarget.name;
 
  saveLocalStorage(nameLocal, inputElement.value);
  
  document.querySelector('#' + targetID).innerHTML = inputElement.value;
}

for (var i = 0; i < inputDataText.length; i++) {
  inputDataText[i].addEventListener('keyup', updateCard);
}



function updateHrefCard(event) {
  var inputHref = event.currentTarget;
  var targetHref = inputHref.getAttribute('data-href');
  var hrefNameLocal = event.currentTarget.name;
  saveLocalStorage(hrefNameLocal, inputHref.value);
  document.querySelector('#' + targetHref).href = inputHref.value;
  console.log(targetHref);

}

for (var i = 0; i < inputDataHref.length; i++) {
  inputDataHref[i].addEventListener('keyup', updateHrefCard);

}


'use strict';

var fr = new FileReader();

var btnImg = document.querySelector('.input--stuffed__img');
var inputImg = document.querySelector('#img--profile');
var profileImg = document.querySelector('.photo');
var preview = document.querySelector('.preview');



function getImage(e) {

  var myFile = e.currentTarget.files[0];
  fr.addEventListener('load', writeImage);
  fr.readAsDataURL(myFile);

}

function writeImage() {

  profileImg.src = fr.result;
  preview.src = fr.result;
}



function inputClick() {

  inputImg.click();


}


inputImg.addEventListener('change', getImage);
btnImg.addEventListener('click', inputClick);
'use strict';



var contenedor = document.querySelector('.label--stuffed__container-select');
var btn = document.querySelectorAll('.btn-select');
var contador = 1;
var minus = '<i class="fas fa-minus"></i>';
var plus = '<i class="fas fa-plus"></i>';
var itemUl = document.querySelector('.card__skills');



fetch('https://raw.githubusercontent.com/Adalab/dorcas-s2-proyecto-data/master/skills.json')
  .then(function (response) {
    return response.json();
  })
  .then(function (json) {
    var skills = [];
    for (var i = 0; i < json.skills.length; i++) {

      skills[i] = json.skills[i];

    }


    function actualizaTarjeta() {

      var listSelects = document.querySelectorAll('.skills--stuffed');
      var spans = document.querySelectorAll('.icon__text');

      spans.innerHTML = '';

      for (var i = 0; i < listSelects.length; i++) {
        spans[i].innerHTML = '';
        spans[i].innerHTML = listSelects[i].value;
      }

    }

    function creaSelect() {

      var newSelect = document.createElement('select');
      newSelect.classList.add('skills--stuffed');

      var newBtn = document.createElement('button');
      newBtn.classList.add('btn-select');

      var newIcon = document.createElement('i');
      newIcon.classList.add('fas');
      newIcon.classList.add('fa-plus');

      newBtn.appendChild(newIcon);

      var container = document.createElement('div');

      for (var i = 0; i < skills.length; i++) {
        var newOption = document.createElement('option');
        var optionText = document.createTextNode(skills[i]);
        newOption.appendChild(optionText);
        newSelect.appendChild(newOption);
        container.classList.add('container-select');
        container.appendChild(newSelect);
        container.appendChild(newBtn);
        contenedor.appendChild(container);
      }

      newSelect.addEventListener('change', actualizaTarjeta);

      return newSelect;

    }

    function borraSelect() {
      contenedor = document.querySelector('.label--stuffed__container-select');
      contenedor.removeChild(contenedor.lastChild);
      contador--;
      //actualizaTarjeta();
    }


    function añadeSelect(e) {

      var boton = e.currentTarget;
      console.log("e ", boton);
      console.log(boton.firstChild.className);

      if (boton.firstChild.className === 'fas fa-plus') {
        if (contador < 3) {
          contador++;
          boton.innerHTML = minus;
          creaSelect();
          botones(btn);
        }
      } else {
        boton.innerHTML = plus;
        borraSelect();
        botones(btn);
      }


    }

    function botones(btn) {

      btn = document.querySelectorAll('.btn-select');
      for (var i = 0; i < btn.length; i++) {

        btn[i].addEventListener('click', añadeSelect);

      }
      console.log(btn.length);
    }


    creaSelect();
    botones();




  });

'use strict';

var submitButton = document.querySelector('#btn-submit');
var responseURL = document.querySelector('.response');
var form = document.querySelector('.form');
var fr = new FileReader();
var buttonTwitter = document.querySelector('.btn-twitter');

var linkTwitter = document.querySelector('.url-twitter');

submitButton.addEventListener('click', loadPhoto);

function sendData () {
  var selects = document.getElementsByTagName('select');
  var inputs = Array.from(form.elements);
  console.log(inputs);
  var json = getJSONFromInputs(inputs);
  json.skills = [];

  for(var i=0; i < selects.length;i++){
    console.log(selects[i]);
    json.skills.push(selects[i].value);
  }
  //json.skills = ['javascript'];
  json.photo = fr.result;
  sendRequest(json);
}

function loadPhoto(){
  var myFile = document.querySelector('#img--profile').files[0];
  fr.addEventListener('load', sendData);
  fr.readAsDataURL(myFile);
}

function getJSONFromInputs(inputs){
  return inputs.reduce(function (acc, val) {
    if(val.nodeName !== 'BUTTON' && val.type !== 'radio' && val.nodeName !== 'FIELDSET' && val.nodeName !== 'SELECT')
    {acc[val.name] = val.value;}
    if (val.type==='radio' && val.checked===true) {
      acc[val.name] = val.value;
    }
    return acc;
  }, {});
}

function sendRequest(json){
  fetch('https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/', {
    method: 'POST',
    body: JSON.stringify(json),
    headers: {
      'content-type': 'application/json'
    },
  })
    .then(function(resp) { return resp.json(); })
    .then(function(result) { showURL(result); })
    .catch(function(error) { console.log(error); });
}
var twitterURL;
function showURL(result){
  var texto = document.querySelector('.container__twitter--title');
  var btnTarjeta = document.querySelector('.form2__button')
  if(result.success){
     
     texto.innerHTML = '<h3 class="twitter-title">La tarjeta ha sido creada:</h3>';
     responseURL.innerHTML = '<a class="link--response" href=' + result.cardURL + '>' + result.cardURL + '</a>';
    btnTarjeta.disabled = true;
    btnTarjeta.classList.add('disabled');

  }else{
    console.log(result.error);
    responseURL.innerHTML = 'ERROR:' + result.error;
  }
  twitterURL = result.cardURL;
}

function shareOnTwitter(){
 

  linkTwitter.href = 'https://twitter.com/intent/tweet?url=' + twitterURL + '&text=Acabo%20de%20crear%20mi%20tarjeta%20con%20Font%20Awesome%20de%20Queens%20of%20hearts&hashtags=WomenInTech';


  

}


buttonTwitter.addEventListener('click', shareOnTwitter);
'use strict';

var p = document.querySelector('.response');


console.log(p.href);

//# sourceMappingURL=main.min.js.map
